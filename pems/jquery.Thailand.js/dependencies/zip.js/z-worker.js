!function(b){"use strict";function e(a){a.scripts&&a.scripts.length>0&&importScripts.apply(void 0,a.scripts),postMessage({type:"importScripts"})}function f(a){var c=b[a.codecClass],e=a.sn;if(d[e])throw Error("duplicated sn");d[e]={codec:new c(a.options),crcInput:"input"===a.crcType,crcOutput:"output"===a.crcType,crc:new k},postMessage({type:"newTask",sn:e})}function h(a){var b=a.sn,c=a.type,e=a.data,h=d[b];!h&&a.codecClass&&(f(a),h=d[b]);var k,i="append"===c,j=g();if(i)try{k=h.codec.append(e,function(c){postMessage({type:"progress",sn:b,loaded:c})})}catch(a){throw delete d[b],a}else delete d[b],k=h.codec.flush();var l=g()-j;j=g(),e&&h.crcInput&&h.crc.append(e),k&&h.crcOutput&&h.crc.append(k);var m=g()-j,n={type:c,sn:b,codecTime:l,crcTime:m},o=[];k&&(n.data=k,o.push(k.buffer)),i||!h.crcInput&&!h.crcOutput||(n.crc=h.crc.get()),postMessage(n,o)}function i(a,b,c){var d={type:a,sn:b,error:j(c)};postMessage(d)}function j(a){return{message:a.message,stack:a.stack}}function k(){this.crc=-1}function l(){}if(b.zWorkerInitialized)throw new Error("z-worker.js should be run only once");b.zWorkerInitialized=!0,addEventListener("message",function(a){var b=a.data,d=b.type,e=b.sn,f=c[d];if(f)try{f(b)}catch(a){i(d,e,a)}});var c={importScripts:e,newTask:f,append:h,flush:h},d={},g=b.performance?b.performance.now.bind(b.performance):Date.now;k.prototype.append=function(b){for(var c=0|this.crc,d=this.table,e=0,f=0|b.length;e<f;e++)c=c>>>8^d[255&(c^b[e])];this.crc=c},k.prototype.get=function(){return~this.crc},k.prototype.table=function(){var a,b,c,d=[];for(a=0;a<256;a++){for(c=a,b=0;b<8;b++)1&c?c=c>>>1^3988292384:c>>>=1;d[a]=c}return d}(),b.NOOP=l,l.prototype.append=function(b,c){return b},l.prototype.flush=function(){}}(this);